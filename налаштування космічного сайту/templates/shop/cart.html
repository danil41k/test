{% extends "base.html" %}

{% block content %}
    <h1>üõí –í–∞—à –ö–æ—à–∏–∫</h1>

    {% if cart_items %}
        <table>
            <thead>
                <tr>
                    <th>–¢–æ–≤–∞—Ä</th>
                    <th>–¶—ñ–Ω–∞</th>
                    <th>–ö—ñ–ª—å–∫—ñ—Å—Ç—å</th>
                    <th>–°—É–º–∞</th>
                </tr>
            </thead>
            <tbody>
                {% for item in cart_items %}
                <tr>
                    <td>{{ item.product.name }}</td>
                    <td>${{ item.product.price | round(2) }}</td>
                    <td>{{ item.quantity }}</td>
                    <td>${{ item.subtotal | round(2) }}</td>
                </tr>
                {% endfor %}
            </tbody>
            <tfoot>
                <tr>
                    <td colspan="3" style="text-align: right; font-weight: bold;">–ó–∞–≥–∞–ª—å–Ω–∞ –°—É–º–∞:</td>
                    <td><strong style="font-size: 1.2em;">${{ total | round(2) }}</strong></td>
                </tr>
            </tfoot>
        </table>

        <div style="text-align: right; margin-top: 20px;">
            {% if current_user.is_authenticated %}
                <form method="POST" action="{{ url_for('shop.checkout') }}">
                    <button type="submit" style="background-color: #28a745; padding: 10px 20px;">–û—Ñ–æ—Ä–º–∏—Ç–∏ –ó–∞–º–æ–≤–ª–µ–Ω–Ω—è</button>
                </form>
            {% else %}
                <p>–ë—É–¥—å –ª–∞—Å–∫–∞, <a href="{{ url_for('auth.login', next=url_for('shop.cart')) }}">—É–≤—ñ–π–¥—ñ—Ç—å</a> –∞–±–æ <a href="{{ url_for('auth.register') }}">–∑–∞—Ä–µ—î—Å—Ç—Ä—É–π—Ç–µ—Å—è</a>, —â–æ–± –æ—Ñ–æ—Ä–º–∏—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è.</p>
                <button disabled style="background-color: #aaa; padding: 10px 20px;">–û—Ñ–æ—Ä–º–∏—Ç–∏ –ó–∞–º–æ–≤–ª–µ–Ω–Ω—è</button>
            {% endif %}
        </div>
    {% else %}
        <p>–í–∞—à –∫–æ—à–∏–∫ –ø–æ—Ä–æ–∂–Ω—ñ–π. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ <a href="{{ url_for('shop.shop_index') }}">–º–∞–≥–∞–∑–∏–Ω—É</a>, —â–æ–± –¥–æ–¥–∞—Ç–∏ —Ç–æ–≤–∞—Ä–∏.</p>
    {% endif %}
{% endblock %}